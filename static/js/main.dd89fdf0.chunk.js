(this["webpackJsonpretro-board"]=this["webpackJsonpretro-board"]||[]).push([[0],{267:function(t,e,n){},383:function(t,e,n){},384:function(t,e,n){},385:function(t,e,n){},386:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n(38),c=n.n(a),o=n(39),i=n(165),s=n(72),u=n(14),p=n(55),d=n(27),l=n(28),b=n(30),h=n(29),j=n(159),f=n.n(j),O=n(101),v=n.n(O),m=(n(267),n(1)),x=function(t){Object(b.a)(n,t);var e=Object(h.a)(n);function n(){var t;return Object(d.a)(this,n),(t=e.call(this)).muiTheme=v()(),t}return Object(l.a)(n,[{key:"render",value:function(){return Object(m.jsx)(f.a,{muiTheme:this.muiTheme,children:this.props.children})}}]),n}(r.Component),y=n(11),k=n.n(y),E=n(17),C=n(41),g=n.n(C),T="https://moon-retro-board.herokuapp.com",S=n(160),R=n.n(S),w=n(161),_=n.n(w),I="CREATE_BOARD",N="CREATE_BOARD_SUCCESS",U="CREATE_BOARD_ERROR",D="GET_BOARD",A="GET_BOARD_SUCCESS",V="GET_BOARD_ERROR",B="ADD_TICKET",M="REMOVE_TICKET",K="REMOVE_TICKET_SUCCESS",L="REMOVE_TICKET_ERROR",P="ADD_SECTION",W="REMOVE_SECTION",G="REMOVE_SECTION_SUCCESS",J="REMOVE_SECTION_ERROR",z="TICKET_DELETED",H="SECTION_DELETED",q="CREATE_TICKET",F="CREATE_TICKET_ERROR",Q=null,X=function(t){return function(){var e=Object(E.a)(k.a.mark((function e(n){var r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:I}),e.prev=1,e.next=4,g.a.post("".concat(T,"/boards"),{name:t});case 4:return r=e.sent,n({type:N,uuid:r.data.uuid}),e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(1),n({type:U,error:e.t0}),e.t0;case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},Y=function(t){return function(){var e=Object(E.a)(k.a.mark((function e(n){var r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:D}),e.prev=1,e.next=4,g.a.get("".concat(T,"/boards/").concat(t));case 4:return r=e.sent,n({type:A,board:r.data}),e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(1),n({type:V,error:e.t0}),e.t0;case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},Z=function(t){return function(e){var n=new R.a("".concat(T,"/socket"));(Q=_.a.over(n)).connect({},(function(){return Q.subscribe("/boards/".concat(t),(function(t){return"ADDED"===(t=JSON.parse(t.body)).type&&"ticket"===t.entity?e({type:B,ticket:t.payload}):"ADDED"===t.type&&"section"===t.entity?e({type:P,section:t.payload}):"REMOVED"===t.type&&"ticket"===t.entity?e({type:z,ticket:t.payload}):"REMOVED"===t.type&&"section"===t.entity?e({type:H,section:t.payload}):void 0}))}))}},$=function(t){var e=t.boardUuid,n=t.name;return function(){var t=Object(E.a)(k.a.mark((function t(r){var a;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:I,name:n}),t.prev=1,t.next=4,g.a.post("".concat(T,"/boards/").concat(e,"/sections"),{name:n});case 4:return a=t.sent,r({type:N,section:a.data}),t.abrupt("return",a.data);case 9:throw t.prev=9,t.t0=t.catch(1),r({type:U,error:t.t0}),t.t0;case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},tt=function(t){var e=t.boardUuid,n=t.sectionUuid,r=t.content;return function(){var t=Object(E.a)(k.a.mark((function t(a){var c;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:q,content:r}),t.prev=1,t.next=4,g.a.post("".concat(T,"/boards/").concat(e,"/sections/").concat(n,"/tickets"),{content:r});case 4:return c=t.sent,a({type:F,section:c.data}),t.abrupt("return",c.data);case 9:throw t.prev=9,t.t0=t.catch(1),a({type:F,error:t.t0}),t.t0;case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},et={loading:!1,error:null,boardUuid:null},nt=n(25),rt={loading:!0,error:null,board:null},at=function(t,e){return t.find((function(t){return t.uuid===e}))},ct=function(t,e){return t.find((function(t){return t.uuid===e}))},ot=Object(o.combineReducers)({createBoard:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case I:return Object.assign({},t,{loading:!0,error:null,boardUuid:null});case N:return Object.assign({},t,{loading:!1,error:null,boardUuid:e.uuid});case U:return Object.assign({},t,{loading:!1,error:e.error,boardUuid:null});default:return t}},board:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case D:return Object.assign({},t,{board:null,loading:!0,error:null});case A:return Object.assign({},t,{board:e.board,loading:!1,error:null});case V:return Object.assign({},t,{board:null,loading:!1,error:e.error});case P:return Object.assign({},t,{board:Object.assign({},t.board,{sections:[].concat(Object(nt.a)(t.board.sections),[e.section])})});case B:var n=at(t.board.sections,e.ticket.sectionUuid),r=t.board.sections.indexOf(n),a=Object.assign({},n,{tickets:[].concat(Object(nt.a)(n.tickets),[e.ticket])});return Object.assign({},t,{board:Object.assign({},t.board,{sections:[].concat(Object(nt.a)(t.board.sections.slice(0,r)),[a],Object(nt.a)(t.board.sections.slice(r+1)))})});case H:n=at(t.board.sections,e.section.uuid),r=t.board.sections.indexOf(n);return Object.assign({},t,{board:Object.assign({},t.board,{sections:[].concat(Object(nt.a)(t.board.sections.slice(0,r)),Object(nt.a)(t.board.sections.slice(r+1)))})});case z:n=at(t.board.sections,e.ticket.sectionUuid),r=t.board.sections.indexOf(n);var c=ct(n.tickets,e.ticket.uuid),o=n.tickets.indexOf(c);a=Object.assign({},n,{tickets:[].concat(Object(nt.a)(n.tickets.slice(0,o)),Object(nt.a)(n.tickets.slice(o+1)))});return Object.assign({},t,{board:Object.assign({},t.board,{sections:[].concat(Object(nt.a)(t.board.sections.slice(0,r)),[a],Object(nt.a)(t.board.sections.slice(r+1)))})});default:return t}}}),it=n(56),st=n.n(it),ut=n(73),pt=n.n(ut),dt=function(t){Object(b.a)(n,t);var e=Object(h.a)(n);function n(){return Object(d.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var t=this;return Object(m.jsxs)("div",{className:"home-page",children:[Object(m.jsx)("h1",{children:"Create board"}),Object(m.jsx)(st.a,{hintText:"Retro Sprint 41",floatingLabelText:"Name your board",ref:function(e){return t.nameInput=e}}),Object(m.jsx)(pt.a,{disabled:this.props.loading,label:"Create",primary:!0,onClick:function(){return t.onCreateBoard()}})]})}},{key:"onCreateBoard",value:function(){var t=Object(E.a)(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.nameInput.getValue()){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,this.props.dispatch(X(this.nameInput.getValue()));case 5:this.props.dispatch(this.props.history.push("/board/".concat(this.nameInput.getValue()))),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),console.error(t.t0);case 11:case"end":return t.stop()}}),t,this,[[2,8]])})));return function(){return t.apply(this,arguments)}}()}],[{key:"mapStateToProps",value:function(t){return t.createBoard}}]),n}(r.Component),lt=Object(u.f)(Object(p.connect)(dt.mapStateToProps)(dt)),bt=n(163),ht=n.n(bt),jt=n(53),ft=n.n(jt),Ot=n(52),vt=n(54),mt=n.n(vt),xt=n(164),yt=n.n(xt),kt=n(104),Et=function(t){Object(b.a)(n,t);var e=Object(h.a)(n);function n(t){var r;return Object(d.a)(this,n),(r=e.call(this,t)).containerStyle={margin:"7px 0",position:"relative"},r.removeButtonStyle={position:"absolute",top:"0",right:"0",padding:"6px"},r.removeIconStyle={width:"30px",height:"30px",fontSize:"15px"},r}return Object(l.a)(n,[{key:"render",value:function(){var t=this;return Object(m.jsxs)(kt.Card,{containerStyle:this.containerStyle,children:[Object(m.jsx)(mt.a,{onClick:function(){return t.props.onRemoveTicket()},style:this.removeButtonStyle,iconClassName:"material-icons",iconStyle:this.removeIconStyle,size:"large",children:"delete"}),Object(m.jsx)(kt.CardText,{children:this.props.ticket.content})]})}}]),n}(r.Component),Ct=(n(383),function(t){Object(b.a)(n,t);var e=Object(h.a)(n);function n(t){var r;return Object(d.a)(this,n),(r=e.call(this,t)).paperStyle={flex:"1 0 200px",maxWidth:"250px",margin:"28px 15px",padding:"5px",minHeight:"300px",position:"relative"},r.removeButtonStyle={position:"absolute",top:"0",right:"0",padding:"6px"},r.removeIconStyle={width:"30px",height:"30px",color:Ot.red500},r}return Object(l.a)(n,[{key:"render",value:function(){var t=this,e=this.props.section;return this.props.children?Object(m.jsx)(ft.a,{style:this.paperStyle,children:this.props.children}):Object(m.jsx)(ft.a,{style:this.paperStyle,children:Object(m.jsxs)("section",{className:"section",children:[Object(m.jsx)(mt.a,{onClick:function(){return t.props.onRemoveSection()},style:this.removeButtonStyle,iconClassName:"material-icons section__remove",iconStyle:this.removeIconStyle,color:Ot.red500,children:"delete"}),Object(m.jsx)("h3",{className:"section__name",children:e.name}),e.tickets.map((function(n){return Object(m.jsx)(Et,{onRemoveTicket:function(){t.props.onRemoveTicket(e.uuid,n)},ticket:n},n.uuid)})),Object(m.jsxs)("div",{className:"add-ticket",children:[Object(m.jsx)(st.a,{fullWidth:!0,hintText:"Ticket content",ref:function(e){return t.ticketContentInput=e}}),Object(m.jsx)(yt.a,{onClick:function(){return t.onCreateTicket()},label:"Add"})]})]})})}},{key:"onCreateTicket",value:function(){var t=Object(E.a)(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.ticketContentInput.getValue()){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.props.onCreateTicket(this.props.section.uuid,this.ticketContentInput.getValue());case 4:this.ticketContentInput.input.value="",this.ticketContentInput.setState({hasValue:!1});case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),n}(r.Component)),gt=(n(384),function(t){Object(b.a)(n,t);var e=Object(h.a)(n);function n(){return Object(d.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"componentWillMount",value:function(){var t=Object(E.a)(k.a.mark((function t(){var e;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.props.dispatch(Y(this.props.match.params.name));case 2:e=t.sent,this.props.dispatch(Z(e.uuid));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;if(this.props.loading)return Object(m.jsx)("div",{children:"Loading..."});if(this.props.error)return Object(m.jsx)("div",{children:"Error :("});var e=this.props.board;return Object(m.jsxs)("div",{children:[Object(m.jsx)(ht.a,{title:"Retro board ".concat(e.name)}),Object(m.jsx)("div",{className:"content",children:Object(m.jsxs)("div",{className:"sections-container",children:[e.sections&&e.sections.map((function(n){return Object(m.jsx)(Ct,{onCreateTicket:function(e,n){return t.onCreateTicket(e,n)},section:n,boardUuid:e.uuid,onRemoveTicket:function(e,n){return t.onRemoveTicket(e,n)},onRemoveSection:function(){return t.onRemoveSection(n)}},n.uuid)})),Object(m.jsx)(Ct,{children:Object(m.jsxs)("div",{className:"create-section",children:[Object(m.jsx)("h4",{children:"Create a new section"}),Object(m.jsx)("div",{className:"create-section__input",children:Object(m.jsx)(st.a,{inputStyle:this.createSectionInputStyles,fullWidth:!0,hintText:"Action items",floatingLabelText:"Name your section",ref:function(e){return t.sectionNameInput=e}})}),Object(m.jsx)(pt.a,{disabled:this.props.loading,label:"Create",primary:!0,onClick:function(){return t.onCreateSection()}})]})})]})})]})}},{key:"onCreateSection",value:function(){var t=Object(E.a)(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.sectionNameInput.getValue()){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.props.dispatch($({boardUuid:this.props.board.uuid,name:this.sectionNameInput.getValue()}));case 4:this.sectionNameInput.input.value="",this.sectionNameInput.setState({hasValue:!1});case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"onRemoveSection",value:function(t){this.props.dispatch(function(t){var e=t.boardUuid,n=t.section;return function(){var t=Object(E.a)(k.a.mark((function t(r){var a;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:W,section:n}),t.prev=1,t.next=4,g.a.delete("".concat(T,"/boards/").concat(e,"/sections/").concat(n.uuid));case 4:return a=t.sent,r({type:G,section:a.data}),t.abrupt("return",a.data);case 9:throw t.prev=9,t.t0=t.catch(1),r({type:J,error:t.t0}),t.t0;case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}({boardUuid:this.props.board.uuid,section:t}))}},{key:"onCreateTicket",value:function(){var t=Object(E.a)(k.a.mark((function t(e,n){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.props.dispatch(tt({boardUuid:this.props.board.uuid,sectionUuid:e,content:n}));case 2:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"onRemoveTicket",value:function(t,e){this.props.dispatch(function(t){var e=t.boardUuid,n=t.sectionUuid,r=t.ticket;return function(){var t=Object(E.a)(k.a.mark((function t(a){var c;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:M,ticket:r}),t.prev=1,t.next=4,g.a.delete("".concat(T,"/boards/").concat(e,"/sections/").concat(n,"/tickets/").concat(r.uuid));case 4:return c=t.sent,a({type:K,section:c.data}),t.abrupt("return",c.data);case 9:throw t.prev=9,t.t0=t.catch(1),a({type:L,error:t.t0}),t.t0;case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}({boardUuid:this.props.board.uuid,sectionUuid:t,ticket:e}))}}],[{key:"mapStateToProps",value:function(t){var e=t.board;return{loading:e.loading,error:e.error,board:e.board}}}]),n}(r.Component)),Tt=Object(u.f)(Object(p.connect)(gt.mapStateToProps)(gt)),St=(n(385),Object(o.createStore)(ot,Object(o.compose)(Object(o.applyMiddleware)(i.a),window.devToolsExtension?window.devToolsExtension():function(t){return t})));c.a.render(Object(m.jsx)(p.Provider,{store:St,children:Object(m.jsx)(s.a,{basename:"/RetroBoard/",children:Object(m.jsx)(x,{children:Object(m.jsxs)(u.c,{children:[Object(m.jsx)(u.a,{exact:!0,path:"/",children:Object(m.jsx)(lt,{})}),Object(m.jsx)(u.a,{path:"/board/:name",children:Object(m.jsx)(Tt,{})})]})})})}),document.getElementById("root"))}},[[386,1,2]]]);
//# sourceMappingURL=main.dd89fdf0.chunk.js.map